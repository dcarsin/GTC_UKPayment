"use strict";var __extends=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(r,t)};return function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}(),__awaiter=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))(function(o,i){function fulfilled(e){try{step(n.next(e))}catch(r){i(r)}}function rejected(e){try{step(n.throw(e))}catch(r){i(r)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof t?e:new t(function(r){r(e)})}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,r||[])).next())})},__generator=this&&this.__generator||function(e,r){var t,n,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(a){return function step(i){if(t)throw new TypeError("Generator is already executing.");for(;c;)try{if(t=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,n=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=r.call(e,c)}catch(a){i=[6,a],n=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.SabreService=void 0;var AbstractService_1=require("sabre-ngv-app/app/services/impl/AbstractService"),ISoapApiService_1=require("sabre-ngv-communication/interfaces/ISoapApiService"),Context_1=require("../Context"),SrwSyncApi_1=require("sabre-ngv-app/app/services/impl/SrwSyncApi"),RestApiService_1=require("sabre-ngv-communication/services/RestApiService"),SabreService=function(e){function SabreService(){return null!==e&&e.apply(this,arguments)||this}return __extends(SabreService,e),SabreService.prototype.callSoapServiceAsync=function(e,r,t,n){var o=this;return new Promise(function(i,c){var a=(0,Context_1.getService)(ISoapApiService_1.ISoapApiService),u={action:r,payload:e,authTokenType:t,timeout:n};console.log("rq_:",u),a.callSws(u).then(function(e){return __awaiter(o,void 0,void 0,function(){return __generator(this,function(r){return console.log("async: response",e),i(e.value),[2]})})}).catch(function(e){console.log("callSoapServiceAsync error: ",e),c(e)})})},SabreService.prototype.callSoapServiceSync=function(e,r){var t=(0,Context_1.getService)(SrwSyncApi_1.SrwSyncApi);try{return t.sws(e,r)}catch(n){}},SabreService.prototype.callRestServiceAsync=function(e,r,t,n,o){return(0,Context_1.getService)(RestApiService_1.RestApiService).send({httpMethod:r,url:e,authTokenType:t,payload:n,headers:o})},SabreService.SERVICE_NAME="com-internova-gtcpayment-web-module-SabreService",SabreService}(AbstractService_1.AbstractService);exports.SabreService=SabreService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9jb2RlL3NlcnZpY2VzL1NhYnJlU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoibWpFQUNBLElBQUEsa0JBQUEsUUFBQSxtREFFQSxrQkFBQSxRQUFBLHNEQUNBLFVBQUEsUUFBQSxjQUNBLGFBQUEsUUFBQSw4Q0FJQSxpQkFBQSxRQUFBLG1EQUVBLGFBQUEsU0FBQSxHQUFBLFNBQUEsOERBd0RBLE9BeERrQyxVQUFBLGFBQUEsR0FHOUIsYUFBQSxVQUFBLHFCQUFBLFNBQXFCLEVBQWlCLEVBQWdCLEVBQThCLEdBQXBGLElBQUEsRUFBQSxLQUNJLE9BQU8sSUFBSSxRQUFnQixTQUFDLEVBQVMsR0FFakMsSUFBSSxHQUEyQixFQUFBLFVBQUEsWUFBVyxrQkFBQSxpQkFDdEMsRUFBTSxDQUFFLE9BQU0sRUFBRSxRQUFPLEVBQUUsY0FBYSxFQUFFLFFBQU8sR0FHbkQsUUFBUSxJQUFJLE9BQU8sR0FDbkIsRUFBUSxRQUFRLEdBQ1gsS0FBSyxTQUFPLEdBQVEsT0FBQSxVQUFBLE9BQUEsT0FBQSxFQUFBLHNEQUNqQixRQUFRLElBQUksa0JBQW1CLEdBRS9CLEVBQVEsRUFBUyxpQkFFcEIsTUFBTSxTQUFBLEdBQ0gsUUFBUSxJQUFJLCtCQUErQixHQUMzQyxFQUFPLFFBS3ZCLGFBQUEsVUFBQSxvQkFBQSxTQUFvQixFQUFlLEdBQy9CLElBQUksR0FBVSxFQUFBLFVBQUEsWUFBVyxhQUFBLFlBSXpCLElBR0ksT0FGVyxFQUFRLElBQUksRUFBTyxHQUlsQyxNQUFPLE1BS1gsYUFBQSxVQUFBLHFCQUFBLFNBQXFCLEVBQWEsRUFBd0IsRUFBOEIsRUFBaUIsR0FFckcsT0FBTyxFQUFBLFVBQUEsWUFBVyxpQkFBQSxnQkFBZ0IsS0FDOUIsQ0FDSSxXQUFZLEVBQ1osSUFBSyxFQUNMLGNBQWUsRUFDZixRQUFTLEVBQ1QsUUFBUyxLQTlDZCxhQUFBLGFBQXVCLG1EQXVEbEMsYUF4REEsQ0FBa0Msa0JBQUEsaUJBQXJCLFFBQUEsYUFBQSIsImZpbGUiOiJTYWJyZVNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJU2FicmVTZXJ2aWNlIH0gZnJvbSBcIi4vSVNhYnJlU2VydmljZVwiO1xyXG5pbXBvcnQgeyBBYnN0cmFjdFNlcnZpY2UgfSBmcm9tIFwic2FicmUtbmd2LWFwcC9hcHAvc2VydmljZXMvaW1wbC9BYnN0cmFjdFNlcnZpY2VcIjtcclxuaW1wb3J0IHsgQXV0aFRva2VuVHlwZSB9IGZyb20gXCJzYWJyZS1uZ3YtYXBwL2FwcC9zZXJ2aWNlcy9pbXBsL0F1dGhUb2tlblR5cGVcIjtcclxuaW1wb3J0IHsgSVNvYXBBcGlTZXJ2aWNlIH0gZnJvbSBcInNhYnJlLW5ndi1jb21tdW5pY2F0aW9uL2ludGVyZmFjZXMvSVNvYXBBcGlTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IGdldFNlcnZpY2UgfSBmcm9tIFwiLi4vQ29udGV4dFwiO1xyXG5pbXBvcnTCoHvCoFNyd1N5bmNBcGnCoH3CoGZyb23CoFwic2FicmUtbmd2LWFwcC9hcHAvc2VydmljZXMvaW1wbC9TcndTeW5jQXBpXCI7XHJcbmltcG9ydMKge8KgU3J3QXN5bmNBcGnCoH3CoGZyb23CoFwic2FicmUtbmd2LWFwcC9hcHAvc2VydmljZXMvaW1wbC9TcndBc3luY0FwaVwiO1xyXG5pbXBvcnQgeyBIdHRwTWV0aG9kIH0gZnJvbSBcInNhYnJlLW5ndi1hcHAvYXBwL3NlcnZpY2VzL2ltcGwvSHR0cE1ldGhvZFwiO1xyXG5pbXBvcnQgeyBSZXN0UmVzcG9uc2UgfSBmcm9tIFwic2FicmUtbmd2LWNvbW11bmljYXRpb24vaW50ZXJmYWNlcy9SZXN0UmVzcG9uc2VcIjtcclxuaW1wb3J0IHsgUmVzdEFwaVNlcnZpY2UgfSBmcm9tIFwic2FicmUtbmd2LWNvbW11bmljYXRpb24vc2VydmljZXMvUmVzdEFwaVNlcnZpY2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTYWJyZVNlcnZpY2UgZXh0ZW5kcyBBYnN0cmFjdFNlcnZpY2UgaW1wbGVtZW50cyBJU2FicmVTZXJ2aWNlIHtcclxuICAgIHN0YXRpYyBTRVJWSUNFX05BTUU6IHN0cmluZyA9IFwiY29tLWludGVybm92YS1ndGNwYXltZW50LXdlYi1tb2R1bGUtU2FicmVTZXJ2aWNlXCI7XHJcblxyXG4gICAgY2FsbFNvYXBTZXJ2aWNlQXN5bmMocGF5bG9hZDogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgYXV0aFRva2VuVHlwZTogQXV0aFRva2VuVHlwZSwgdGltZW91dDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tdW5zYWZlLWFueVxyXG4gICAgICAgICAgICBsZXQgc29hcFN2YzogSVNvYXBBcGlTZXJ2aWNlID0gZ2V0U2VydmljZShJU29hcEFwaVNlcnZpY2UpO1xyXG4gICAgICAgICAgICBsZXQgcnFfID0geyBhY3Rpb24sIHBheWxvYWQsIGF1dGhUb2tlblR5cGUsIHRpbWVvdXQgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tdW5zYWZlLWFueVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJxXzpcIixycV8pO1xyXG4gICAgICAgICAgICBzb2FwU3ZjLmNhbGxTd3MocnFfKSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHJlc3BvbnNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJhc3luYzogcmVzcG9uc2VcIiwgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tdW5zYWZlLWFueVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjYWxsU29hcFNlcnZpY2VBc3luYyBlcnJvcjogXCIsZXJyb3IpOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNhbGxTb2FwU2VydmljZVN5bmMoc3ZjUlE6IHN0cmluZywgc3ZjQWN0aW9uQ29kZTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgc29hcFN2YyA9IGdldFNlcnZpY2UoU3J3U3luY0FwaSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJzb2FwU3ZjOlwiLHNvYXBTdmMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCByZXNwb25zZSA9IFwiXCI7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmVzcG9uc2UgPSBzb2FwU3ZjLnN3cyhzdmNSUSwgc3ZjQWN0aW9uQ29kZSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic29hcFN2Yy1yZXNwb3NlOiBcIiwgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhleCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbGxSZXN0U2VydmljZUFzeW5jKHVybDogc3RyaW5nLCBodHRwTWV0aG9kOiBIdHRwTWV0aG9kLCBhdXRoVG9rZW5UeXBlOiBBdXRoVG9rZW5UeXBlLCBwYXlsb2FkOiBzdHJpbmcsIGhlYWRlcnM6IHN0cmluZyk6IFByb21pc2U8UmVzdFJlc3BvbnNlPiB7XHJcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby11bnNhZmUtYW55XHJcbiAgICAgICAgcmV0dXJuIGdldFNlcnZpY2UoUmVzdEFwaVNlcnZpY2UpLnNlbmQoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGh0dHBNZXRob2Q6IGh0dHBNZXRob2QsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGF1dGhUb2tlblR5cGU6IGF1dGhUb2tlblR5cGUsXHJcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBwYXlsb2FkLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVyc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 